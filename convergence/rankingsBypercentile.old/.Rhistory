break()
}
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
circuit
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
break()
}
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
break()
}
prank.acc
View(circuit_m.sim)
names(prank.acc) <- rownames(circuit_m.sim)
tmp.df<- NULL
tmp.df <- NULL
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
tmp.df <- cbind(prank.acc, prank.flex)
break()
}
View(tmp.df)
rownames(tmp.df) <- rownames(circuit_m.sim)
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.2(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.2(circuit_metrics.sim$flexibility, x))
tmp.df <- cbind(prank.acc, prank.flex)
rownames(tmp.df) <- rownames(circuit_m.sim)
break()
}
tmp.df <- NULL
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
tmp.df <- cbind(prank.acc, prank.flex)
rownames(tmp.df) <- rownames(circuit_m.sim)
break()
}
View(circuit_metrics.sim)
circuit_metrics.sim
rownames(circuit_metrics.sim)
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('node', names(circuit_metrics.sim.list))
prank.samples.acc$node <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('node', names(circuit_metrics.sim.list))
prank.samples.flex$node <- circuit_m.sim$Nodes
View(prank.samples.acc)
View(prank.samples.flex)
circuit_metrics.sim.sorted <- list()
tmp.df <- NULL
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
tmp.df <- cbind(prank.acc, prank.flex)
rownames(tmp.df) <- rownames(circuit_m.sim)
break()
}
View(tmp.df)
View(tmp.df)
tmp.df <- NULL
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
tmp.df <- cbind(prank.acc, prank.flex)
rownames(tmp.df) <- rownames(circuit_m.sim)
prank.samples.acc[sample_name] <- prank.acc
prank.samples.flex[sample_name] <- prank.flex
break()
}
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- prank.acc
prank.samples.flex[sample_name] <- prank.flex
#break()
}
names(circuit_metrics.sim.sorted)
avg.samples <- apply(prank.acc[2:ncol(prank.acc)], 1, mean)
sd.samples <- apply(prank.acc[2:ncol(prank.acc)], 1, sd)
avg.samples <- apply(prank.acc[2:ncol(prank.acc)], 1, mean)
class(prank.acc)
prank.acc
avg.samples <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
sd.samples <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.acc$mean <- avg.samples
prank.samples.acc$sd <- sd.samples
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
perc.rank.2(circuit_metrics.sim$Accuracy, circuit_metrics.sim$Accuracy)
dim(circuit_metrics.sim)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
length(prank.acc.bg)
prank.acc.bg
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.acc.bg
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.avg <- prank.samples.acc
View(prank.samples.avg)
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$node <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$node <- circuit_m.sim$Nodes
circuit_metrics.sim.sorted <- list()
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- prank.acc
prank.samples.flex[sample_name] <- prank.flex
#break()
}
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$nodes <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$nodes <- circuit_m.sim$Nodes
circuit_metrics.sim.sorted <- list()
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- prank.acc
prank.samples.flex[sample_name] <- prank.flex
#break()
}
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.avg <- cbind(prank.samples.flex$nodes)
prank.samples.avg <- cbind(prank.samples.flex$nodes,
(prank.samples.acc$mean + prank.samples.flex$mean)/2,
(prank.samples.acc$bg+prank.samples.flex$bg)/2)
View(prank.samples.avg)
rownames(prank.samples.avg) <- rownames(prank.samples.flex$nodes)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
rownames(prank.samples.avg) <- rownames(prank.samples.flex$nodes)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
prank.samples.avg <- cbind(prank.samples.flex$nodes,
(prank.samples.acc$mean + prank.samples.flex$mean)/2,
(prank.samples.acc$bg+prank.samples.flex$bg)/2)
rownames(prank.samples.avg) <- rownames(prank.samples.flex$nodes)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
View(prank.samples.avg)
rownames(prank.samples.avg) <- rownames(prank.samples.flex)
View(circuit_metrics.sim)
getwd()
outdir <- './results/'
write.csv(prank.samples.avg, file = './results/prank.samples.avg.csv', row.names = T, quote = F)
write.csv(format(prank.samples.avg, digits = 2), file = './results/prank.samples.avg.csv', row.names = T, quote = F)
write.csv(format(prank.samples.avg, digits = 3), file = './results/prank.samples.avg.csv', row.names = T, quote = F)
write.csv(format(prank.samples.acc, digits = 3), file = './results/prank.samples.acc.csv', row.names = T, quote = F)
write.csv(format(prank.samples.flex, digits = 3), file = './results/prank.samples.flex.csv', row.names = T, quote = F)
remove(list = ls())
outdir <- './results/'
circuit_metrics.sim <- read.csv(file = './results/summary.circuits.sim.sortedByAcc_flex.csv', row.names = 1)
circuit_metrics.sim.list <- readRDS(file = paste0('../samples/comb.metrics.SSIZE.10K/results/circuit_metrics.sim.list.rds'))
names(circuit_metrics.sim.list)
perc.rank.3 <- function(x, xo)  length(x[x >= xo])/length(x)*100
circuit_m.sim <- circuit_metrics.sim.list$S1
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$nodes <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$nodes <- circuit_m.sim$Nodes
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
}
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.avg <- cbind(prank.samples.flex$nodes,
(prank.samples.acc$mean + prank.samples.flex$mean)/2,
(prank.samples.acc$bg+prank.samples.flex$bg)/2)
rownames(prank.samples.avg) <- rownames(prank.samples.flex)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
View(prank.samples.acc)
View(prank.samples.avg)
View(prank.samples.flex)
remove(list = ls())
outdir <- './results/'
circuit_metrics.sim <- read.csv(file = './results/summary.circuits.sim.sortedByAcc_flex.csv', row.names = 1)
perc.rank.3 <- function(x, xo)  (100-length(x[x <= xo])/length(x)*100)
circuit_m.sim <- circuit_metrics.sim.list$S1
circuit_m.sim <- circuit_metrics.sim.list$S1
remove(list = ls())
outdir <- './results/'
circuit_metrics.sim <- read.csv(file = './results/summary.circuits.sim.sortedByAcc_flex.csv', row.names = 1)
circuit_metrics.sim.list <- readRDS(file = paste0('../samples/comb.metrics.SSIZE.10K/results/circuit_metrics.sim.list.rds'))
names(circuit_metrics.sim.list)
perc.rank.3 <- function(x, xo)  (100-length(x[x <= xo])/length(x)*100)
circuit_m.sim <- circuit_metrics.sim.list$S1
View(circuit_metrics.sim)
View(circuit_m.sim)
topCkts <- rownames(circuit_metrics.sim)[1:10]
rownames(topCkts)
rownames(circuit_m.sim)
rownames(circuit_m.sim) == topCkts
sum(rownames(circuit_m.sim) == topCkts)
sum(rownames(circuit_m.sim) == topCkts)
View(circuit_metrics.sim)
View(circuit_m.sim)
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$nodes <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$nodes <- circuit_m.sim$Nodes
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
}
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.avg <- cbind(prank.samples.flex$nodes,
(prank.samples.acc$mean + prank.samples.flex$mean)/2,
(prank.samples.acc$bg+prank.samples.flex$bg)/2)
rownames(prank.samples.avg) <- rownames(prank.samples.flex)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
View(prank.samples.acc)
View(prank.samples.avg)
View(prank.samples.avg)
View(prank.samples.acc)
View(circuit_metrics.sim)
View(prank.samples.flex)
View(prank.samples.avg)
View(prank.samples.acc)
#!/usr/bin/env Rscript
remove(list = ls())
outdir <- './results/'
circuit_metrics.sim <- read.csv(file = './results/summary.circuits.sim.sortedByAcc_flex.csv', row.names = 1)
circuit_metrics.sim.list <- readRDS(file = paste0('../samples/comb.metrics.SSIZE.10K/results/circuit_metrics.sim.list.rds'))
names(circuit_metrics.sim.list)
#perc.rank.3 <- function(x, xo)  (100-length(x[x <= xo])/length(x)*100)
perc.rank.3 <- function(x, xo)  length(x[x >= xo])/length(x)*100
# create data structures
circuit_m.sim <- circuit_metrics.sim.list$S1
# check whetehr they are the same circuits
topCkts <- rownames(circuit_metrics.sim)[1:10]
sum(rownames(circuit_m.sim) == topCkts)
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$nodes <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$nodes <- circuit_m.sim$Nodes
# perform ranking for each sample
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
}
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.avg <- cbind(prank.samples.flex$nodes,
(prank.samples.acc$mean + prank.samples.flex$mean)/2,
(prank.samples.acc$bg+prank.samples.flex$bg)/2)
rownames(prank.samples.avg) <- rownames(prank.samples.flex)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
write.csv(format(prank.samples.acc, digits = 3), file = './results/prank.samples.acc.csv', row.names = T, quote = F)
write.csv(format(prank.samples.flex, digits = 3), file = './results/prank.samples.flex.csv', row.names = T, quote = F)
write.csv(format(prank.samples.avg, digits = 3), file = './results/prank.samples.avg.csv', row.names = T, quote = F)
View(prank.samples.acc)
View(prank.samples.avg)
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
sum(rownames(circuit_m.sim) == topCkts)
}
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
print(sum(rownames(circuit_m.sim) == topCkts))
}
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
#print(sum(rownames(circuit_m.sim) == topCkts))
}
View(prank.samples.acc)
View(prank.samples.avg)
View(prank.samples.flex)
View(circuit_metrics.sim)
#!/usr/bin/env Rscript
remove(list = ls())
outdir <- './results/'
circuit_metrics.sim <- read.csv(file = './results/summary.circuits.sim.sortedByAcc_flex.csv', row.names = 1)
circuit_metrics.sim.list <- readRDS(file = paste0('../samples/comb.metrics.SSIZE.10K/results/circuit_metrics.sim.list.rds'))
names(circuit_metrics.sim.list)
perc.rank.3 <- function(x, xo)  (100-length(x[x <= xo])/length(x)*100)
#perc.rank.3 <- function(x, xo)  length(x[x >= xo])/length(x)*100
# create data structures
circuit_m.sim <- circuit_metrics.sim.list$S1
# check whetehr they are the same circuits
topCkts <- rownames(circuit_metrics.sim)[1:10]
sum(rownames(circuit_m.sim) == topCkts)
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$nodes <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$nodes <- circuit_m.sim$Nodes
# perform ranking for each sample
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
#print(sum(rownames(circuit_m.sim) == topCkts))
}
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.avg <- cbind(prank.samples.flex$nodes,
(prank.samples.acc$mean + prank.samples.flex$mean)/2,
(prank.samples.acc$bg+prank.samples.flex$bg)/2)
rownames(prank.samples.avg) <- rownames(prank.samples.flex)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
write.csv(format(prank.samples.acc, digits = 3), file = './results/prank.samples.acc.csv', row.names = T, quote = F)
write.csv(format(prank.samples.flex, digits = 3), file = './results/prank.samples.flex.csv', row.names = T, quote = F)
write.csv(format(prank.samples.avg, digits = 3), file = './results/prank.samples.avg.csv', row.names = T, quote = F)
View(prank.samples.acc)
View(prank.samples.flex)
remove(list = ls())
outdir <- './results/'
circuit_metrics.sim <- read.csv(file = './results/summary.circuits.sim.sortedByAcc_flex.csv', row.names = 1)
circuit_metrics.sim.list <- readRDS(file = paste0('../samples/comb.metrics.SSIZE.10K/results/circuit_metrics.sim.list.rds'))
names(circuit_metrics.sim.list)
circuit_m.sim <- circuit_metrics.sim.list$S1
View(circuit_m.sim)
topCkts <- rownames(circuit_metrics.sim)[1:10]
sum(rownames(circuit_m.sim) == topCkts)
topCkts
topCkts <- rownames(circuit_metrics.sim)[1:10]
sum(rownames(circuit_m.sim) == topCkts)
View(circuit_m.sim)
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
View(prank.samples.acc)
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$nodes <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$nodes <- circuit_m.sim$Nodes
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
#print(sum(rownames(circuit_m.sim) == topCkts))
}
perc.rank.3 <- function(x, xo)  (100-length(x[x <= xo])/length(x)*100)
circuit_m.sim <- circuit_metrics.sim.list$S1
topCkts <- rownames(circuit_metrics.sim)[1:10]
sum(rownames(circuit_m.sim) == topCkts)
prank.samples.acc <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.acc) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.acc) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.acc$nodes <- circuit_m.sim$Nodes
prank.samples.flex <- as.data.frame(matrix(nrow = nrow(circuit_m.sim),
ncol = (length(names(circuit_metrics.sim.list))+1)))
rownames(prank.samples.flex) <- row.names(circuit_metrics.sim)[1:10]
colnames(prank.samples.flex) <- c('nodes', names(circuit_metrics.sim.list))
prank.samples.flex$nodes <- circuit_m.sim$Nodes
for(sample_name in names(circuit_metrics.sim.list)){
print(sample_name)
circuit_m.sim <- circuit_metrics.sim.list[[sample_name]]
# prank.acc <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
# prank.flex <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc[sample_name] <- sapply(circuit_m.sim$Accuracy, function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.samples.flex[sample_name] <- sapply(circuit_m.sim$flexibility, function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
#print(sum(rownames(circuit_m.sim) == topCkts))
}
prank.samples.acc$mean <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, mean)
prank.samples.acc$sd <- apply(prank.samples.acc[2:ncol(prank.samples.acc)], 1, sd)
prank.samples.flex$mean <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, mean)
prank.samples.flex$sd <- apply(prank.samples.flex[2:ncol(prank.samples.flex)], 1, sd)
prank.acc.bg <- sapply(circuit_metrics.sim$Accuracy[1:10], function (x) perc.rank.3(circuit_metrics.sim$Accuracy, x))
prank.flex.bg <- sapply(circuit_metrics.sim$flexibility[1:10], function (x) perc.rank.3(circuit_metrics.sim$flexibility, x))
prank.samples.acc$bg <- prank.acc.bg
prank.samples.flex$bg <- prank.flex.bg
prank.samples.avg <- cbind(prank.samples.flex$nodes,
(prank.samples.acc$mean + prank.samples.flex$mean)/2,
(prank.samples.acc$bg+prank.samples.flex$bg)/2)
rownames(prank.samples.avg) <- rownames(prank.samples.flex)
colnames(prank.samples.avg) <- c('nodes', 'avg.rank.samples', 'avg.rank.bg')
View(circuit_m.sim)
